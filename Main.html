<!DOCTYPE html>

<head>
    <link rel="stylesheet" href="css/entry_page.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta charset="UTF-8">
    <title>欢迎使用“秦始皇”！</title>
</head>

<body style="margin: 0;padding: 0;gap: 0;">
    <div class="page" id="page1">
        <div id="entry_center_div">
            <div class="header">
                <div id="title">秦始皇</div>
            </div>
            <div class="slides">
                <div class="carousel-container">
                    <img class="carousel-item" src="images/slides/slides_1.png">
                    <img class="carousel-item" src="images/slides/slides_2.png">
                    <img class="carousel-item" src="images/slides/slides_3.png">
                </div>
            </div>
            <div id="testimonials">
                <img src="images/icons/Start_conv.png">
            </div>
            <div class="functions">
                <div id="start_conv_button">
                    <div style="display: flex;align-items: center;left: 10vw;"
                        onclick="location.href='Conversion_Pad.html'">
                        <img src="images/icons/Qin.png" style="position: relative;left: 5vw;height: 13vh;">
                        <p style="color: white;font-size: 180%;position: relative;left: 20%;font-weight: 700;">开始换算</p>
                    </div>
                </div>
                <div id="community_button">
                    <div onclick="location.href='Community.html'" style="display: flex;flex-direction: column;align-items: center;">
                        <img src="images/icons/Conv_Knowledges.png" style="height:40vw;max-width:20vh;position: relative;">
                        <p style="position: relative;top:-2vh;color: white;font-weight: 600;text-align: center;">经验社区</p>
                    </div>
                </div>
                <div id="knowledges_button">
                    <div>
                        <img src="images/icons/Conv_Community.png">
                        <span style="position: relative;left:-1vw;top:-4vh;color: white;font-weight: 600;">换算知识</span>
                    </div>
                </div>
                <div id="about_button" onclick="location.href = 'About.html'">
                    <div>
                        <img src="images/icons/About_Us.png">
                        <span style="position: relative;left:-1vw;top:-4vh;color: white;font-weight: 600;">关于我们</span>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="page" id="page2" style="display: none;">
        <div id="conv_history">
            <div id="title">
                换算历史
            </div>
            <div id="history_grid">
                <div id="history_1" class='history_record' onclick="location.href='Conversion_Pad.html?input_item_name=西湖&output_item_name=一瓶农夫山泉矿泉水'">
                    <div class="history_info">
                        <div class="history_time">
                            2024-4-19
                        </div>
                        <div class="history_name">
                            西湖-矿泉水
                        </div>
                    </div>
                    <img src="images/icons/History.svg">
                </div>
                <div id="history_2" class='history_record' onclick="location.href='Conversion_Pad.html?input_item_name=橘子&output_item_name=手机'">
                    <div class="history_info">
                        <div class="history_time">
                            2024-4-17
                        </div>
                        <div class="history_name">
                            橘子-手机
                        </div>
                    </div>
                    <img src="images/icons/History.svg">
                </div>
                <div id="history_3" class='history_record' onclick="location.href='Conversion_Pad.html?input_item_name=一百万人民币&output_item_name=一瓶农夫山泉矿泉水'">
                    <div class="history_info">
                        <div class="history_time">
                            2024-4-16
                        </div>
                        <div class="history_name">
                            一百万人民币-矿泉水
                        </div>
                    </div>
                    <img src="images/icons/History.svg">
                </div>
            </div>
        </div>
    </div>


    <div class="plate">
        <div id='entry_center_div' class='plate_btn' onclick="switchPage(1)">
            <img src='images/icons/Home.svg' height=40px>
            <p>主页</p>
        </div>
        <div id='conv_history' class='plate_btn'>
            <img src="images/icons/History.svg" height="40px" onclick="switchPage(2)">
            <p>换算历史</p>
        </div>
    </div>



    <script>
        const carouselImages = document.querySelectorAll(".carousel-item");
        const imageCount = carouselImages.length;
        let currentIndex = 0;
        let timerId;

        function initCarousel() {
            setupView();
            bindEvents();
            startAutoPlay();
        }

        initCarousel();

        function setupView() {
            const halfLength = Math.floor(imageCount / 2);
            for (let i = 0; i < halfLength; i++) {
                let leftIndex = (currentIndex - i - 1 + imageCount) % imageCount;
                let rightIndex = (currentIndex + i + 1) % imageCount;

                carouselImages[leftIndex].style.transform = `translateX(${-150 * (i + 1)}px) translateZ(${200 - i * 100}px) rotateY(30deg)`;
                carouselImages[rightIndex].style.transform = `translateX(${150 * (i + 1)}px) translateZ(${200 - i * 100}px) rotateY(-30deg)`;
            }
            carouselImages[currentIndex].style.transform = `translateZ(300px)`;
        }

        function bindEvents() {
            for (let i = 0; i < imageCount; i++) {
                (function (index) {
                    carouselImages[index].addEventListener('click', function () {
                        currentIndex = index;
                        setupView();
                    });

                    carouselImages[index].addEventListener('mouseenter', function () {
                        clearInterval(timerId);
                    });

                    carouselImages[index].addEventListener('mouseout', function () {
                        startAutoPlay();
                    });
                })(i);
            }
        }

        function startAutoPlay() {
            timerId = setInterval(function () {
                currentIndex = (currentIndex + 1) % imageCount;
                setupView();
            }, 4000);
        }
    </script>

    <script>
        document.getElementById('knowledges_button').addEventListener('click', function () {
            // 重定向到页面B，并跳转到名为target的section
            window.location.href = 'About.html#services';
        });
    </script>

    <script>
        function switchPage(pageNum) {
            // 隐藏所有页面  
            document.querySelectorAll('.page').forEach(page => page.style.display = 'none');

            // 显示选中的页面  
            document.getElementById('page' + pageNum).style.display = 'flex';

            // 移除所有按钮的活跃状态  
            document.querySelectorAll('.plate_btn').forEach(btn => btn.classList.remove('active'));

            // 给选中的按钮添加活跃状态  
            document.getElementById('plate_btn_' + pageNum).classList.add('active');
        }
        switchPage(1);
    </script>

</body>